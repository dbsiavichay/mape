{% extends 'base.html' %}

{% load staticfiles %}

{% block css %}
    <link href="{% static 'showcase/css/event.css' %}" rel="stylesheet">        
    <link href="{% static 'plugins/clockpicker/clockpicker.css' %}" rel="stylesheet">
{% endblock %}

{% block content %}
{% include 'includes/nav.html' %}
<span class="hidden" id="event-info" event-id="{{ event.id }}"></span>
  
<!-- Imagen de portada -->
<div class="front-image">        
    {% if not object.front_image %}      
    <img src="{{ object.front_image.url }}" alt="{{ comment.profile }} comment">
    {% else %}
    <img src="{% static '/showcase/img/Fondo-colores.jpg' %}" alt="{{ comment.profile }} comment">
    {% endif %}
    <div class="title center opacado">
        <h3 class="white">{{ event.name }}</h3>        
    </div>
</div>

{% if is_organizer %}
<!-- Opciones para organizador -->
<div class="right">
    <a class="waves-effect waves-cyan btn-flat" href="/event/{{ event.id }}/update/" >Editar</a>
</div>
{% endif %}
<!-- Imagenes -->
{%if object.front_image %}
<div class="carousel grey col s12 m12 l6">
    <a class="carousel-item" href="{{ object.front_image.url }}">
        <img src="{{ object.front_image.url }}">
    </a>
    {% for comment in object.comments %}
      {% if comment.image %}
    <a class="carousel-item" href="{{ comment.image.url }}">
        <img src="{{ comment.image.url }}" alt="{{ comment.profile }} comment">
    </a>
      {% endif %}
    {% endfor %}
</div>
{%endif%}
<div class="row">
    <div class="col s12">
      <div class="center">
      <div class="right-align fringe tiny-text" >{{ event.get_information }} </div>
        <!-- Opciones de evento -->
        <div class="center row">
            {% if False %}
            <div class="col l4 m4 s10 offset-s2 offset-l2 offset-m2 valign-wrapper highter">
            <h4 class="red-text">Cancelado</h4>
            {% elif False %}
            <div class="col l4 m4 s10 offset-s2 offset-l2 offset-m2 valign-wrapper highter">
            <h4 class="blue-text">Completado</h4>
            {% elif False %}
            <div class="col l3 m4 s9 offset-s3 offset-l2 offset-m2 valign-wrapper highter">
            <h4 class="timeuntil red-text pulse">En vivo</h4>
            {% elif True %}
            <div class="col l4 m5 s10 offset-s1 offset-l1 offset-m1 valign-wrapper highter">
            <h4 class="timeuntil">En {{ event.start|timeuntil }}</h4>
            {% endif %}
          </div>  
          <div class="card col l6 m6 s12">
            <p class="flow-text left-align">{{ event.description }} </p>
            {% if object.locality %}
            <p>Lugar: </p>
            <div class="chip truncate {% if object.locality.commercial %} amber {% endif %} lighten-2">
                <img src="{{ object.locality.profile_image.url }}" alt="{{ object.locality }}">
                <a class="collection-item" href="/locality/{{ object.locality.id }}">{{ object.locality }} </a>
            </div>
            {% endif %}
            <p>Organizado por</p>
            {% for organizer in event.get_organizers %}
            <div class="chip truncate"> 
              {% if organizer.profile.avatar %}
              <img src="{{ organizer.profile.avatar.url }}" alt="Contact Person">
              {% else %}
              <img src="{% static 'showcase/img/event-header.jpg' %}" alt="Contact Person">
              {% endif %}
              <a href="/profiles/{{ organizer.username }}/">{{ organizer.get_full_name }}</a>
            {% endfor %}
            </div>
          </div>
          <div class="col s12">
              <p><i class="small material-icons tiny">query_builder</i>
              {{ event.start }}</p>
              <p><i class="small material-icons tiny">{% if event.cover == 0 %}money_off {% else%} attach_money {% endif %}</i>{% if event.cover == 0 %}Gratis {% else%} Precio: {{ event.cover }} {% endif %}
              {% if not object.is_public %} <i class="material-icons tiny">lock</i> Privado {% else %} <i class="material-icons tiny">public</i> Público {% endif %}</p>
          </div>  
          <div class="col s12">
            {% if not is_organizer %}
            <a href="#guests_modal" class="modal-trigger waves-effect waves-light btn amber"><i class="material-icons tiny">person_add </i>Invitar</a>
            {% else %}
              {% if not object.is_public %}
            <a href="#guests_modal" class="modal-trigger waves-effect waves-light btn cyan"><i class="material-icons tiny">person_add </i>Invitar</a>
              {% endif %}
            <a href="/event/{{ event.id }}/like/" class="cyan waves-effect waves-light btn"><i class="material-icons tiny">thumb_up</i>Me gusta</a>
            <a href="/event/{{ event.id }}/attend/" class="cyan waves-effect waves-light btn"><i class="material-icons tiny">check_circle</i>Asistiré</a>
            <a href="/event/{{ event.id }}/maybe_attend/" class="cyan waves-effect waves-light btn"><i class="material-icons tiny">help</i>Talvez asista</a>
            <a href="/event/{{ event.id }}/not_atttend/" class="cyan waves-effect waves-light btn"><i class="material-icons tiny">cancel</i>No asistiré</a>
            {% endif %}
          </div>
          <div class="card col s12">       
            {% include 'includes/comments.html' with comments=object.comments model_name="event" model_id=object.id %}
          </div>
        </div>
      </div>
    
</div>


<div class="section grey lighten-4">
    <div class="row container">
      <!-- Slides -->
      <div class="section slider col m10 l10 offset-l1 offset-m1 s12 ">
          <ul class="slides">
            <!-- Host account -->
            <li class="cyan">
              <img class="opacado" src="{% static 'showcase/img/mar.jpg' %}"> 
              <div class="caption row ">
                <h5 class="col s6 offset-s4 white-text shadow"> Un evento de:</h5>
                <div class="col s12 m6 l5 offset-m3 offset-l4"><a href="#">
                  {% if True %} <img class="circle" src="{% static 'showcase/img/mar.jpg' %}" alt="commertial profile image">{%else%}<i class="circle white large material-icons">store</i>{%endif%}</a></div>
                <h5 class="col offset-s3">Comercial de organizador</h5>
              </div>
            </li>
            <!-- Sponsors slides  -->
            <li class="cyan">
            {% if true %}
              <img class="opacado" src="{% static '/showcase/img/Fondo-colores.png' %}" alt="commertial profile image">
            {% else %}
              <img class="opacado" src="{% static '/showcase/img/Fondo-colores.jpg' %}" alt="commertial profile image">
            {% endif %} 
              <div class="caption row ">
                <h5 class="col s6 offset-s4 white-text shadow"> Con el auspicio de:</h5>
                <div class="col s12 m6 l5 offset-m3 offset-l4"><a href="#"> {% if True %} <img class="circle" src="{% static '/showcase/img/mar.jpg' %}"  alt="commertial profile image">{%else%}<i class="circle white large material-icons">store</i>{%endif%}</a> </div>
                <h5 class="col center-align s10 offset-s1">Mape </h5>
              </div>
            </li>
          </ul>
      </div>
    </div>
  </div>

{% include "includes/guests_modal.html" %}
{% include "includes/footer.html" %}

{% endblock %}

{% block js %}
    <!-- Rango  jquery materialize para mape -->
    <script src="{% static 'showcase/js/rango-jquery.js' %}"></script>
    <script src="{% static 'showcase/js/event.js' %}"></script>    
{% endblock %}













